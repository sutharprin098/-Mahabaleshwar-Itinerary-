<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mahabaleshwar Smart Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#1f3c88">

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css">
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
/* --- LAYOUT --- */
body, html { margin:0; padding:0; font-family:'Segoe UI', sans-serif; height:100%; background:#f8f9fa; overflow:hidden; }
.app-container { display:flex; height:100vh; width:100vw; }

/* --- MAP & PANEL --- */
#map { flex-grow:1; height:100%; z-index:1; }
.panel {
  background:white; padding:20px; box-shadow:5px 0 25px rgba(0,0,0,0.15); z-index:1000;
  display:flex; flex-direction:column; overflow-y:auto; width:360px; min-width:320px;
}

/* --- PHOTO MARKERS --- */
.marker-pin {
  width: 64px; height: 64px; 
  border-radius: 50%; border: 4px solid #ffffff;
  box-shadow: 0 8px 15px rgba(0,0,0,0.4); 
  background-size: cover; background-position: center; background-color: #ddd;
  transition: transform 0.3s;
}
.marker-pin:hover { transform: scale(1.2); border-color: #3498db; z-index:9999!important; }

/* --- WEATHER BADGE --- */
.weather-badge {
  background: white; color: #333; padding: 5px 12px; border-radius: 20px; 
  font-weight: bold; font-size: 13px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); border: 2px solid #f39c12;
  white-space: nowrap; text-align: center;
}

/* --- GLOWING ROAD --- */
.route-glow path { filter: drop-shadow(0 0 8px rgba(52, 152, 219, 0.7)); }

/* --- UI ELEMENTS --- */
h2 { margin-top:0; color:#1f3c88; display:flex; align-items:center; gap:10px; }
.days-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:15px; }

button {
  padding:12px; border:1px solid #e0e0e0; background:white; border-radius:8px; 
  cursor:pointer; font-weight:600; color:#444; transition:0.2s; margin-bottom: 5px;
}
button:hover { transform:translateY(-2px); box-shadow:0 5px 15px rgba(0,0,0,0.05); }
button.active { background:#1f3c88; color:white; border-color:#1f3c88; }

.btn-weather { width:100%; background:#f39c12; color:white; border:none; margin-bottom:10px; }
.btn-weather.on { background:#27ae60; }
.btn-weather.loading { background:#bdc3c7; cursor:wait; }
.btn-pdf { width:100%; background:#e74c3c; color:white; border:none; margin-bottom:10px; }
.btn-admin { width:100%; background:#2c3e50; color:white; border:none; margin-top: auto; }

.stats-box {
  background: linear-gradient(135deg, #3498db, #2980b9); color:white;
  padding:15px; border-radius:10px; margin-bottom:15px; font-size:14px;
  display:none; animation: slideUp 0.5s ease-out;
}
@keyframes slideUp { from {opacity:0; transform:translateY(10px);} to {opacity:1; transform:translateY(0);} }

/* --- ADMIN MODAL --- */
.modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; justify-content: center; align-items: center; }
.modal-content { background: white; padding: 25px; border-radius: 12px; width: 90%; max-width: 400px; max-height: 80vh; overflow-y: auto; }
.form-group { margin-bottom: 15px; }
.form-group label { display: block; font-size: 12px; font-weight: bold; margin-bottom: 5px; color:#555; }
.form-group input { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }

@media(max-width:768px){ .app-container{ flex-direction:column; } #map{ height:60vh; order:1; } .panel{ width:100%; height:40vh; order:2; border-radius:20px 20px 0 0; margin-top:-20px; padding:20px; box-sizing:border-box; } .leaflet-routing-container { display:none!important; } }

/* --- PDF TEMPLATE --- */
#pdf-template { display:none; padding: 20px; font-family: sans-serif; background:white; width: 700px; }
.pdf-header { text-align: center; color: #1f3c88; margin-bottom: 15px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
.pdf-map-container { width: 100%; height: 350px; border: 2px solid #1f3c88; margin-bottom: 20px; overflow:hidden; border-radius:8px; }
.pdf-map-img { width: 100%; height: 100%; object-fit: cover; }
.pdf-stats { background: #f0f4f8; padding: 10px; border-radius: 8px; margin-bottom: 20px; font-weight: bold; text-align:center; }
.pdf-item { display: flex; gap: 15px; margin-bottom: 15px; border: 1px solid #eee; padding: 10px; border-radius: 8px; page-break-inside: avoid; background:#fff; }
.pdf-img { width: 100px; height: 80px; object-fit: cover; border-radius: 6px; border:1px solid #ddd; }
.pdf-info h3 { margin: 0 0 5px 0; color: #333; font-size:16px; }
.pdf-info p { margin: 2px 0; font-size:12px; color:#555; }
</style>
</head>

<body>

<div class="app-container">
  <div class="panel">
    <h2>‚õ∞Ô∏è Mahabaleshwar GIS</h2>
    
    <button class="btn-weather" id="weatherBtn" onclick="toggleWeather()">‚òÅÔ∏è Click for Live Weather</button>
    <div class="stats-box" id="routeInfo"></div>

    <div class="days-grid">
      <button onclick="showDay(1, this)">Day 1<br><small>Waterfalls</small></button>
      <button onclick="showDay(2, this)">Day 2<br><small>Panchgani</small></button>
      <button onclick="showDay(3, this)">Day 3<br><small>History</small></button>
      <button onclick="showDay(4, this)">Day 4<br><small>Tapola</small></button>
    </div>
    
    <button class="btn-pdf" onclick="downloadPDF()">üìÑ Download PDF (with Map)</button>

    <button class="btn-admin" onclick="openAdmin()">‚öôÔ∏è Edit Photos (Admin)</button>
    <div style="text-align:center; margin-top:5px; font-size:10px; color:#888;">Data v3.0 Loaded</div>
  </div>
  <div id="map"></div>
</div>

<div id="adminModal" class="modal">
  <div class="modal-content">
    <h3>Update Photos</h3>
    <div id="adminForm"></div>
    <div style="display:flex; gap:10px; margin-top:20px;">
      <button onclick="saveAdminData()" style="flex:1; background:#1f3c88; color:white;">üíæ Save</button>
      <button onclick="document.getElementById('adminModal').style.display='none'" style="flex:1; background:#7f8c8d; color:white;">Cancel</button>
    </div>
    <button onclick="hardReset()" style="width:100%; margin-top:10px; background:white; color:red; border:1px solid red; padding:5px;">‚ö†Ô∏è Factory Reset</button>
  </div>
</div>

<div id="pdf-template"></div>

<script>
// --- 1. NEW IMAGE DATA ---
var APP_VERSION = "3.0"; 
var RESORT = [17.9258, 73.6560];

var DEFAULT_DAYS = {
  1: { 
    route: [RESORT, [17.9235, 73.6470], [17.9355, 73.6735], [17.9420, 73.7055], RESORT], 
    points: [ 
      {name: "Venna Lake", lat: 17.9235, lng: 73.6470, alt: "1400m", img: "data:image/jpeg;base64,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", desc: "Boating & Horse Riding"}, 
      {name: "Lingmala Falls", lat: 17.9355, lng: 73.6735, alt: "1250m", img: "https://www.trawell.in/admin/images/upload/128612903Mahabaleshwar_Lingmala_Waterfalls_Main.jpg", desc: "Spectacular Waterfall"}, 
      {name: "Kate‚Äôs Point", lat: 17.9420, lng: 73.7055, alt: "1290m", img: "https://upload.wikimedia.org/wikipedia/commons/2/22/Kate%27s_Point.jpg", desc: "Elephant Head View"} 
    ] 
  },
  2: { 
    route: [RESORT, [17.9400, 73.7370], [17.9330, 73.7340], [17.9250, 73.8010], RESORT], 
    points: [ 
      {name: "Mapro Garden", lat: 17.9400, lng: 73.7370, alt: "1350m", img: "https://upload.wikimedia.org/wikipedia/commons/c/c5/Mapro_Garden.jpg", desc: "Strawberry & Chocolate"}, 
      {name: "Bhilar Book Village", lat: 17.9330, lng: 73.7340, alt: "1300m", img: "https://static.toiimg.com/thumb/msid-58532402,width-748,height-499,resizemode-4/58532402.jpg", desc: "India's First Book Village"}, 
      {name: "Panchgani Table Land", lat: 17.9250, lng: 73.8010, alt: "1334m", img: "https://upload.wikimedia.org/wikipedia/commons/e/e3/Table_Land_Panchgani.jpg", desc: "Asia's 2nd Longest Plateau"} 
    ] 
  },
  3: { 
    route: [RESORT, [17.9380, 73.5800], [17.9310, 73.6510], RESORT], 
    points: [
      {name: "Pratapgad Fort", lat: 17.9380, lng: 73.5800, alt: "1080m", img: "https://upload.wikimedia.org/wikipedia/commons/3/36/Pratapgad_Fort_Pune.jpg", desc: "Historic Fort"}, 
      {name: "Mahabaleshwar Temple", lat: 17.9310, lng: 73.6510, alt: "1438m", img: "https://upload.wikimedia.org/wikipedia/commons/6/62/Mahabaleshwar_Temple.jpg", desc: "Ancient Shiva Temple"}
    ] 
  },
  4: { 
    route: [RESORT, [17.9485, 73.8880], [17.6350, 73.7450], RESORT], 
    points: [
      {name: "Wai Ganpati", lat: 17.9485, lng: 73.8880, alt: "718m", img: "https://upload.wikimedia.org/wikipedia/commons/f/f6/Dholya_Ganpati_Wai.jpg", desc: "Famous Ghat Temple"}, 
      {name: "Tapola (Mini Kashmir)", lat: 17.6350, lng: 73.7450, alt: "600m", img: "https://www.trawell.in/admin/images/upload/128612918Tapola_Main.jpg", desc: "Shivsagar Lake & Camping"}
    ] 
  }
};

// AUTO-FIX: Force update if version changes to load new images
if(localStorage.getItem('appVersion') !== APP_VERSION) {
    localStorage.clear(); 
    localStorage.setItem('appVersion', APP_VERSION);
}
var DAYS = JSON.parse(localStorage.getItem('tourData')) || DEFAULT_DAYS;

// MAP INIT
var map = L.map('map', {zoomControl: false, preferCanvas: true}).setView([17.9258, 73.6560], 11);
L.control.zoom({ position: 'topright' }).addTo(map);
// CORS Fix for PDF Generation
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '¬© OpenStreetMap', crossOrigin: 'anonymous' }).addTo(map);

var markerGroup = L.layerGroup().addTo(map);
var weatherGroup = L.layerGroup().addTo(map);
var routeControl = null;
var currentDay = 1;
var currentStats = ""; 
var isWeatherOn = false;

function showDay(d, btn){
  currentDay = d;
  document.querySelectorAll('.days-grid button').forEach(b => b.classList.remove('active')); 
  if(btn) btn.classList.add('active');
  markerGroup.clearLayers();
  if(routeControl) { map.removeControl(routeControl); routeControl = null; }

  var infoBox = document.getElementById("routeInfo");
  infoBox.style.display = 'block';
  infoBox.innerHTML = "üöó Calculating Route...";

  // Resort
  var resortIcon = L.divIcon({ className:'', html: `<div class="marker-pin" style="background-image:url('https://cdn-icons-png.flaticon.com/512/139/139899.png'); background-size:60%; background-color:#fff;"></div>`, iconSize: [64, 64], iconAnchor: [32, 32] });
  L.marker(RESORT, {icon: resortIcon}).addTo(markerGroup).bindPopup("<b>Base Camp</b>");

  // Points
  DAYS[d].points.forEach((p, i) => {
    var alt = p.alt ? p.alt : "N/A";
    setTimeout(() => {
      var photoIcon = L.divIcon({ className:'', html: `<div class="marker-pin" style="background-image:url('${p.img}');"></div>`, iconSize: [64, 64], iconAnchor: [32, 32], popupAnchor: [0, -35] });
      var popupContent = `<div style="text-align:center;"><img src="${p.img}" style="width:100%; height:130px; object-fit:cover; border-radius:5px;"><h3 style="margin:5px 0; color:#1f3c88;">${p.name}</h3><p style="margin:0; font-size:12px; color:#555;">${p.desc}</p><div style="background:#e3f2fd; color:#1565c0; padding:3px 8px; border-radius:4px; font-size:11px; display:inline-block; margin-top:5px; font-weight:bold;">‚õ∞Ô∏è Elev: ${alt}</div></div>`;
      L.marker([p.lat, p.lng], {icon: photoIcon}).addTo(markerGroup).bindPopup(popupContent);
    }, i * 150);
  });

  // Route
  routeControl = L.Routing.control({
    waypoints: DAYS[d].route.map(c => L.latLng(c[0],c[1])),
    router: L.Routing.osrmv1({serviceUrl: "https://router.project-osrm.org/route/v1"}),
    lineOptions: { styles: [{color: 'white', opacity: 0.9, weight: 8}, {color: '#3498db', opacity: 1, weight: 5, className: 'route-glow'}] },
    createMarker: function() { return null; }, addWaypoints: false, fitSelectedRoutes: false
  })
  .on('routesfound', function(e) {
    var r = e.routes[0];
    var dist = (r.summary.totalDistance/1000).toFixed(1);
    var time = (r.summary.totalTime/3600).toFixed(1);
    currentStats = `Distance: ${dist} km | Drive Time: ${time} hrs`;
    infoBox.innerHTML = `<div style="font-weight:bold; font-size:15px;">Day ${d} Summary</div><div style="margin-top:5px;">üìè ${dist} km &nbsp;|&nbsp; ‚è±Ô∏è ${time} hrs</div>`;
    var pad = window.innerWidth < 768 ? [20, 200] : [50, 50];
    map.flyToBounds(L.polyline(r.coordinates).getBounds(), { paddingBottomRight: window.innerWidth < 768 ? [0, 200] : [0,0], duration: 1.5 });
  })
  .addTo(map);

  if(isWeatherOn) fetchWeather();
}

// --- PDF DOWNLOAD FUNCTION ---
function downloadPDF() {
  var btn = document.querySelector('.btn-pdf');
  var originalText = btn.innerHTML;
  btn.innerHTML = "‚è≥ Generating PDF...";
  btn.disabled = true;

  html2canvas(document.getElementById('map'), {
    useCORS: true,
    allowTaint: true,
    ignoreElements: (node) => node.classList.contains('leaflet-control-zoom')
  }).then(canvas => {
    var mapImgData = canvas.toDataURL('image/png');
    var template = document.getElementById('pdf-template');
    var html = `
      <div class="pdf-header"><h1>Mahabaleshwar Trip - Day ${currentDay}</h1></div>
      <div class="pdf-map-container"><img src="${mapImgData}" class="pdf-map-img"></div>
      <div class="pdf-stats">${currentStats || "Route Calculating..."}</div>
      <h2>Itinerary Details:</h2>
    `;

    DAYS[currentDay].points.forEach(p => {
      var alt = p.alt ? p.alt : "N/A";
      html += `
        <div class="pdf-item">
          <img src="${p.img}" class="pdf-img" crossorigin="anonymous">
          <div class="pdf-info">
            <h3>${p.name}</h3><p>${p.desc}</p><p><strong>Elevation:</strong> ${alt}</p>
          </div>
        </div>`;
    });

    template.innerHTML = html;
    template.style.display = 'block';

    var opt = {
      margin: 10,
      filename: `Mahabaleshwar_Day_${currentDay}_Itinerary.pdf`,
      image: { type: 'jpeg', quality: 0.98 },
      html2canvas: { scale: 2, useCORS: true },
      jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };

    html2pdf().from(template).set(opt).save().then(() => {
        template.style.display = 'none';
        btn.innerHTML = originalText;
        btn.disabled = false;
    });
  }).catch(err => {
    alert("Map Capture Error: Please allow image loading.");
    console.error(err);
    btn.innerHTML = originalText;
    btn.disabled = false;
  });
}

function openAdmin(){ var m=document.getElementById("adminModal"),f=document.getElementById("adminForm"),h=`<p style="font-size:12px;color:#666;">Editing Day ${currentDay}</p>`; DAYS[currentDay].points.forEach((p,i)=>{h+=`<div class="form-group"><label>üì∏ ${p.name} URL:</label><input type="text" id="img_${i}" value="${p.img}"></div>`}); f.innerHTML=h; m.style.display="flex"; }
function saveAdminData(){ DAYS[currentDay].points.forEach((p,i)=>{var v=document.getElementById(`img_${i}`).value; if(v)p.img=v}); localStorage.setItem('tourData',JSON.stringify(DAYS)); document.getElementById("adminModal").style.display="none"; showDay(currentDay); }
function hardReset(){ if(confirm("Reset Data?")){localStorage.clear();location.reload();} }
async function toggleWeather(){ isWeatherOn=!isWeatherOn; var b=document.getElementById('weatherBtn'); if(!isWeatherOn){ weatherGroup.clearLayers(); b.classList.remove('on'); b.innerHTML="‚òÅÔ∏è Click for Live Weather"; return; } b.innerHTML="‚è≥ Fetching..."; b.classList.add('loading'); await fetchWeather(); b.classList.remove('loading'); b.classList.add('on'); b.innerHTML="‚úÖ Live Weather ON"; }
async function fetchWeather(){ weatherGroup.clearLayers(); for(let p of DAYS[currentDay].points){ try{ let r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${p.lat}&longitude=${p.lng}&current_weather=true`), d=await r.json(), i=d.current_weather.weathercode>3?"‚òÅÔ∏è":"‚òÄÔ∏è"; L.marker([p.lat,p.lng],{icon:L.divIcon({className:'',html:`<div class="weather-badge">${d.current_weather.temperature}¬∞C ${i}</div>`,iconSize:[60,25],iconAnchor:[30,55]}),interactive:false}).addTo(weatherGroup); }catch(e){} } }

showDay(1, document.querySelectorAll('.days-grid button')[0]);
</script>
</body>
</html>

